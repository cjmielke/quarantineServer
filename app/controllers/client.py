import random
import time
from collections import deque

from flask import Blueprint, render_template, jsonify, request
from sqlalchemy import text

from app.controllers import add_blueprint
from app.initializers.settings import ALL_RECEPTORS
from app.models import db
from app.models.jobs import getJob, Job

bp = Blueprint('client', __name__, url_prefix='/client')


'''
The whole point of this controller is to build the static page assets for the local client

This allows me to develop the client interface using jade/pug templates and coffeescript, and also
easily deploy updates to the client interface
'''


#@bp.route('/')
#def index():
#	return render_template('client/client.html.jade')

@bp.route('/index-v1.html')
def index1():
	return render_template('client/client.v1.html.jade')



class FakeConsole():
	def __init__(self):
		self.deque = deque([], maxlen=5)
		self.total = 0
	def simulate(self):
		lines = random.randint(4, 10)
		for n in xrange(0, lines): self.deque.append(n)     # append fake output
		return
	def getNewLines(self, lastLine):            # client indicates last line it received, return diff
		return

con = FakeConsole()


@bp.route('update.json')
def lastJob():
	lj = {"tranche": 446, "ligand": 1, "user": None, "receptor": "mpro-1", "algo": "AD4", "time": 167.92191004753113, "bestDG": -3.35, "meanDG": -2.283529411764706, "zincID": "ZINC000008384274"}
	console = con.simulate()
	lj = {"lastResults": {"tranche": 158, "ligand": 1, "zincID": "ZINC000004018039", "receptor": "mpro-1", "user": None, "time": 112.50104594230652, "bestDG": -7.74, "meanDG": -6.891666666666666, "algo": "AD4"}, "receptor": "mpro-1", "ligand": "ZINC000004018039", "lastJob": 101}
	#lj['receptor'] = random.choice(['spike-1'*10, 'mpro-1'])

	lj['console'] = ['a', 'b', 'c', 'd', time.time()]
	return jsonify(**lj)



# an endpoint for testing the client-side javascript for configuring program settings
clientSettings = dict(username='anonymousB')

@bp.route('settings.json', methods=['GET','POST'])
def settings():
	if request.method == 'GET':
		return jsonify(**clientSettings)

@bp.route('config', methods=['GET','POST'])
def config():
	if request.method == 'GET':
		return jsonify(**clientSettings)
	if request.method == 'POST':
		assert request.is_json
		j = request.get_json()
		#print request.form['username']
		#clientSettings['username'] = request.form['username']
		clientSettings['username'] = j['username']
		response = {'status': 'ok'}
		return jsonify(**response)



ligand = '''
REMARK  Name = ZINC000069639911
REMARK                            x       y       z     vdW  Elec       q    Type
REMARK                         _______ _______ _______ _____ _____    ______ ____
ROOT
ATOM      1  C   LIG    1       -1.294   1.936   0.019  0.00  0.00    -0.360 A 
ATOM      2  C   LIG    1       -2.507   1.244   0.027  0.00  0.00    +0.280 A 
ATOM      3  N   LIG    1       -3.647   1.922   0.036  0.00  0.00    -0.620 NA
ATOM      4  C   LIG    1       -3.683   3.237   0.038  0.00  0.00    +0.340 A 
ATOM      5  N   LIG    1       -2.557   3.997   0.031  0.00  0.00    -0.630 NA
ATOM      6  C   LIG    1       -1.342   3.404   0.027  0.00  0.00    +0.490 A 
ATOM      7  O   LIG    1       -0.320   4.066   0.021  0.00  0.00    -0.580 OA
ENDROOT
BRANCH   4   8
ATOM      8  C   LIG    1       -5.000   3.914   0.049  0.00  0.00    +0.270 A 
ATOM      9  C   LIG    1       -6.182   3.169   0.063  0.00  0.00    -0.030 A 
ATOM     10  C   LIG    1       -7.389   3.852   0.073  0.00  0.00    +0.290 A 
ATOM     11  N   LIG    1       -7.381   5.174   0.069  0.00  0.00    -0.540 NA
ATOM     12  C   LIG    1       -6.247   5.848   0.056  0.00  0.00    +0.460 A 
ATOM     13  N   LIG    1       -5.078   5.244   0.052  0.00  0.00    -0.480 NA
ENDBRANCH   4   8
BRANCH   1  15
ATOM     14  O   LIG    1        0.002  -0.004   0.002  0.00  0.00    -0.730 OA
ATOM     15  C   LIG    1       -0.015   1.220   0.009  0.00  0.00    +0.540 C 
ATOM     16  O   LIG    1        1.037   1.846   0.002  0.00  0.00    -0.690 OA
ENDBRANCH   1  15
TORSDOF 2
ENDMDL
'''

@bp.route('/ligand.pdbqt')
def sendLigand():
	return ligand




traj = '''
MODEL        1
ATOM      1  C   LIG    1       10.908   2.598  22.610 -0.32 -0.16    +0.350 C 
ATOM      2  N   LIG    1       10.735   1.157  22.814 -0.07 +0.17    -0.510 N 
ATOM      3  C   LIG    1        9.708   0.486  22.169 -0.15 -0.11    +0.350 A 
ATOM      4  C   LIG    1        9.566  -0.882  22.380 -0.27 +0.05    -0.160 A 
ATOM      5  N   LIG    1        8.474  -1.282  21.621 -0.11 +0.15    -0.410 N 
ATOM      6  C   LIG    1        8.004  -0.171  20.994 -0.09 -0.20    +0.470 A 
ATOM      7  C   LIG    1       10.464  -1.541  23.236 -0.03 -0.15    +0.600 A 
ATOM      8  N   LIG    1       11.445  -0.835  23.836 -0.03 +0.14    -0.550 N 
ATOM      9  C   LIG    1       12.384  -1.518  24.729 -0.33 -0.08    +0.360 C 
ATOM     10  O   LIG    1       10.359  -2.739  23.435 -0.13 +0.11    -0.520 OA
ATOM     11  N   LIG    1        8.745   0.866  21.328 -0.08 +0.21    -0.500 NA
ATOM     12  C   LIG    1       11.577   0.486  23.621 +0.04 -0.22    +0.710 A 
ATOM     13  O   LIG    1       12.473   1.091  24.179 -0.18 +0.20    -0.520 OA
ATOM     14  N   LIG    1        6.924  -0.135  20.143 -0.10 +0.23    -0.470 N 
ATOM     15  C   LIG    1        7.339  -0.379  18.753 -0.53 -0.10    +0.180 C 
ATOM     16  C   LIG    1        6.101  -0.391  17.852 -0.59 -0.16    +0.240 C 
ATOM     17  O   LIG    1        5.401   0.847  17.998 -0.44 +0.31    -0.370 OA
ATOM     18  C   LIG    1        4.981   1.117  19.338 -0.42 -0.20    +0.230 C 
ATOM     19  C   LIG    1        6.207   1.143  20.256 -0.35 -0.15    +0.210 C 
ATOM     20  C   LIG    1        7.932  -2.639  21.518 -0.06 -0.12    +0.340 C 
ATOM     21  C   LIG    1        6.825  -2.827  22.558 -0.30 -0.09    +0.310 C 
ATOM     22  N   LIG    1        6.661  -1.590  23.325 +0.05 +0.26    -0.620 N 
ATOM     23  C   LIG    1        7.304  -1.427  24.436 -0.01 -0.24    +0.730 C 
ATOM     24  H   LIG    1        6.070  -0.893  23.001 -0.32 -0.25    +0.420 HD
ATOM     25  N   LIG    1        7.059  -0.326  25.213 -0.02 +0.18    -0.560 N 
ATOM     26  C   LIG    1        7.127  -0.405  26.681 -0.11 -0.08    +0.300 C 
ATOM     27  C   LIG    1        8.021   0.732  27.187 -0.16 -0.05    +0.240 C 
ATOM     28  O   LIG    1        7.563   1.970  26.638 -0.09 +0.09    -0.360 OA
ATOM     29  C   LIG    1        7.635   2.042  25.212 -0.08 -0.08    +0.250 C 
ATOM     30  C   LIG    1        6.726   0.972  24.606 -0.11 -0.10    +0.260 C 
ENDMDL
MODEL        2
ATOM      1  C   LIG    1        7.211   3.511  24.535 -0.07 -0.14    +0.350 C 
ATOM      2  N   LIG    1        7.300   2.058  24.701 -0.01 +0.18    -0.510 N 
ATOM      3  C   LIG    1        7.076   1.223  23.617 -0.06 -0.15    +0.350 A 
ATOM      4  C   LIG    1        7.166  -0.153  23.802 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1        6.897  -0.730  22.568 -0.07 +0.17    -0.410 N 
ATOM      6  C   LIG    1        6.659   0.289  21.701 -0.06 -0.23    +0.470 A 
ATOM      7  C   LIG    1        7.481  -0.655  25.076 -0.01 -0.19    +0.600 A 
ATOM      8  N   LIG    1        7.689   0.207  26.093 -0.03 +0.15    -0.550 N 
ATOM      9  C   LIG    1        8.018  -0.312  27.423 -0.10 -0.09    +0.360 C 
ATOM     10  O   LIG    1        7.566  -1.857  25.261 -0.06 +0.15    -0.520 OA
ATOM     11  N   LIG    1        6.769   1.439  22.337 -0.02 +0.27    -0.500 NA
ATOM     12  C   LIG    1        7.605   1.535  25.903 +0.03 -0.20    +0.710 A 
ATOM     13  O   LIG    1        7.798   2.282  26.843 -0.05 +0.12    -0.520 OA
ATOM     14  N   LIG    1        6.352   0.145  20.368 -0.11 +0.25    -0.470 N 
ATOM     15  C   LIG    1        7.556  -0.154  19.579 -0.46 -0.09    +0.180 C 
ATOM     16  C   LIG    1        7.160  -0.366  18.116 -0.44 -0.14    +0.240 C 
ATOM     17  O   LIG    1        6.476   0.795  17.639 -0.46 +0.27    -0.370 OA
ATOM     18  C   LIG    1        5.297   1.116  18.385 -0.49 -0.21    +0.230 C 
ATOM     19  C   LIG    1        5.674   1.343  19.851 -0.39 -0.19    +0.210 C 
ATOM     20  C   LIG    1        6.874  -2.162  22.261 -0.25 -0.11    +0.340 C 
ATOM     21  C   LIG    1        8.281  -2.624  21.873 -0.26 -0.11    +0.310 C 
ATOM     22  N   LIG    1        9.266  -1.964  22.734 -0.01 +0.18    -0.620 N 
ATOM     23  C   LIG    1       10.378  -1.534  22.232 -0.02 -0.22    +0.730 C 
ATOM     24  H   LIG    1        9.085  -1.850  23.680 +0.20 -0.11    +0.420 HD
ATOM     25  N   LIG    1       11.349  -1.027  23.054 -0.03 +0.14    -0.560 N 
ATOM     26  C   LIG    1       11.043   0.044  24.017 -0.24 -0.08    +0.300 C 
ATOM     27  C   LIG    1       11.566  -0.378  25.394 -0.34 -0.05    +0.240 C 
ATOM     28  O   LIG    1       12.940  -0.756  25.280 -0.42 +0.08    -0.360 OA
ATOM     29  C   LIG    1       13.170  -1.882  24.430 -0.53 -0.06    +0.250 C 
ATOM     30  C   LIG    1       12.727  -1.540  23.007 -0.44 -0.07    +0.260 C 
ENDMDL
MODEL        3
ATOM      1  C   LIG    1        8.961   3.764  22.974 -0.20 -0.20    +0.350 C 
ATOM      2  N   LIG    1        8.169   2.654  23.509 -0.02 +0.23    -0.510 N 
ATOM      3  C   LIG    1        8.721   1.384  23.586 -0.06 -0.13    +0.350 A 
ATOM      4  C   LIG    1        7.948   0.348  24.098 -0.13 +0.05    -0.160 A 
ATOM      5  N   LIG    1        8.744  -0.790  24.055 -0.05 +0.12    -0.410 N 
ATOM      6  C   LIG    1        9.940  -0.412  23.531 -0.05 -0.13    +0.470 A 
ATOM      7  C   LIG    1        6.636   0.616  24.523 +0.00 -0.23    +0.600 A 
ATOM      8  N   LIG    1        6.153   1.871  24.424 -0.01 +0.22    -0.550 N 
ATOM      9  C   LIG    1        4.784   2.155  24.865 -0.07 -0.13    +0.360 C 
ATOM     10  O   LIG    1        5.940  -0.278  24.975 -0.01 +0.23    -0.520 OA
ATOM     11  N   LIG    1        9.911   0.877  23.259 -0.02 +0.17    -0.500 NA
ATOM     12  C   LIG    1        6.909   2.867  23.932 +0.05 -0.32    +0.710 A 
ATOM     13  O   LIG    1        6.441   3.987  23.858 +0.00 +0.26    -0.520 OA
ATOM     14  N   LIG    1       11.014  -1.245  23.319 -0.09 +0.12    -0.470 N 
ATOM     15  C   LIG    1       11.774  -1.454  24.560 -0.39 -0.04    +0.180 C 
ATOM     16  C   LIG    1       12.920  -2.432  24.291 -0.49 -0.05    +0.240 C 
ATOM     17  O   LIG    1       13.738  -1.921  23.236 -0.39 +0.10    -0.370 OA
ATOM     18  C   LIG    1       13.030  -1.707  22.011 -0.49 -0.06    +0.230 C 
ATOM     19  C   LIG    1       11.884  -0.721  22.256 -0.38 -0.05    +0.210 C 
ATOM     20  C   LIG    1        8.366  -2.137  24.490 -0.12 -0.09    +0.340 C 
ATOM     21  C   LIG    1        7.365  -2.731  23.496 -0.25 -0.08    +0.310 C 
ATOM     22  N   LIG    1        6.857  -1.672  22.622 -0.01 +0.23    -0.620 N 
ATOM     23  C   LIG    1        7.338  -1.531  21.429 +0.02 -0.27    +0.730 C 
ATOM     24  H   LIG    1        6.160  -1.075  22.937 -0.28 -0.24    +0.420 HD
ATOM     25  N   LIG    1        6.951  -0.469  20.656 -0.02 +0.25    -0.560 N 
ATOM     26  C   LIG    1        7.350  -0.376  19.242 -0.38 -0.15    +0.300 C 
ATOM     27  C   LIG    1        6.097  -0.100  18.403 -0.57 -0.15    +0.240 C 
ATOM     28  O   LIG    1        5.408   1.030  18.945 -0.37 +0.31    -0.360 OA
ATOM     29  C   LIG    1        4.931   0.842  20.279 -0.35 -0.17    +0.250 C 
ATOM     30  C   LIG    1        6.121   0.611  21.212 -0.26 -0.15    +0.260 C 
ENDMDL
MODEL        4
ATOM      1  C   LIG    1       11.541   4.387  23.053 -0.23 -0.18    +0.350 C 
ATOM      2  N   LIG    1       10.380   3.493  23.057 -0.11 +0.27    -0.510 N 
ATOM      3  C   LIG    1       10.563   2.122  23.132 -0.09 -0.14    +0.350 A 
ATOM      4  C   LIG    1        9.444   1.295  23.134 -0.20 +0.06    -0.160 A 
ATOM      5  N   LIG    1        9.921  -0.006  23.216 -0.07 +0.12    -0.410 N 
ATOM      6  C   LIG    1       11.277   0.074  23.259 -0.11 -0.13    +0.470 A 
ATOM      7  C   LIG    1        8.165   1.873  23.061 +0.02 -0.27    +0.600 A 
ATOM      8  N   LIG    1        8.049   3.215  22.989 -0.03 +0.30    -0.550 N 
ATOM      9  C   LIG    1        6.717   3.821  22.912 -0.11 -0.24    +0.360 C 
ATOM     10  O   LIG    1        7.170   1.168  23.061 -0.01 +0.23    -0.520 OA
ATOM     11  N   LIG    1       11.642   1.340  23.209 -0.12 +0.18    -0.500 NA
ATOM     12  C   LIG    1        9.136   4.005  22.993 +0.04 -0.41    +0.710 A 
ATOM     13  O   LIG    1        8.994   5.211  22.927 -0.14 +0.30    -0.520 OA
ATOM     14  N   LIG    1       12.135  -0.997  23.342 -0.11 +0.12    -0.470 N 
ATOM     15  C   LIG    1       12.854  -0.999  24.625 -0.55 -0.04    +0.180 C 
ATOM     16  C   LIG    1       13.750  -2.238  24.699 -0.61 -0.06    +0.240 C 
ATOM     17  O   LIG    1       14.641  -2.244  23.581 -0.35 +0.14    -0.370 OA
ATOM     18  C   LIG    1       13.975  -2.243  22.315 -0.44 -0.07    +0.230 C 
ATOM     19  C   LIG    1       13.080  -1.004  22.216 -0.51 -0.06    +0.210 C 
ATOM     20  C   LIG    1        9.117  -1.230  23.248 -0.16 -0.10    +0.340 C 
ATOM     21  C   LIG    1        9.313  -2.004  21.943 -0.28 -0.11    +0.310 C 
ATOM     22  N   LIG    1        8.848  -1.190  20.817 +0.01 +0.26    -0.620 N 
ATOM     23  C   LIG    1        7.740  -0.529  20.912 +0.03 -0.30    +0.730 C 
ATOM     24  H   LIG    1        9.371  -1.147  20.002 -0.20 -0.24    +0.420 HD
ATOM     25  N   LIG    1        7.244   0.134  19.821 -0.05 +0.29    -0.560 N 
ATOM     26  C   LIG    1        7.466  -0.378  18.459 -0.40 -0.17    +0.300 C 
ATOM     27  C   LIG    1        6.116  -0.427  17.735 -0.58 -0.16    +0.240 C 
ATOM     28  O   LIG    1        5.479   0.849  17.838 -0.46 +0.30    -0.360 OA
ATOM     29  C   LIG    1        5.172   1.243  19.177 -0.42 -0.23    +0.250 C 
ATOM     30  C   LIG    1        6.470   1.375  19.975 -0.25 -0.20    +0.260 C 
ENDMDL
MODEL        5
ATOM      1  C   LIG    1       10.978   4.655  22.987 -0.28 -0.19    +0.350 C 
ATOM      2  N   LIG    1       10.033   3.552  23.173 -0.09 +0.27    -0.510 N 
ATOM      3  C   LIG    1       10.502   2.257  23.325 +0.04 -0.15    +0.350 A 
ATOM      4  C   LIG    1        9.582   1.228  23.501 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1       10.323   0.060  23.623 -0.08 +0.12    -0.410 N 
ATOM      6  C   LIG    1       11.632   0.412  23.519 -0.13 -0.14    +0.470 A 
ATOM      7  C   LIG    1        8.210   1.530  23.520 +0.04 -0.24    +0.600 A 
ATOM      8  N   LIG    1        7.813   2.810  23.368 -0.00 +0.27    -0.550 N 
ATOM      9  C   LIG    1        6.383   3.130  23.387 -0.07 -0.20    +0.360 C 
ATOM     10  O   LIG    1        7.386   0.644  23.673 -0.01 +0.20    -0.520 OA
ATOM     11  N   LIG    1       11.721   1.715  23.344 -0.13 +0.19    -0.500 NA
ATOM     12  C   LIG    1        8.709   3.798  23.204 +0.02 -0.38    +0.710 A 
ATOM     13  O   LIG    1        8.315   4.941  23.069 -0.10 +0.29    -0.520 OA
ATOM     14  N   LIG    1       12.697  -0.455  23.588 -0.15 +0.14    -0.470 N 
ATOM     15  C   LIG    1       12.741  -1.331  22.408 -0.53 -0.05    +0.180 C 
ATOM     16  C   LIG    1       13.973  -2.235  22.497 -0.47 -0.07    +0.240 C 
ATOM     17  O   LIG    1       13.927  -2.976  23.718 -0.36 +0.11    -0.370 OA
ATOM     18  C   LIG    1       13.885  -2.154  24.889 -0.63 -0.06    +0.230 C 
ATOM     19  C   LIG    1       12.651  -1.248  24.825 -0.51 -0.05    +0.210 C 
ATOM     20  C   LIG    1        9.795  -1.292  23.824 -0.17 -0.09    +0.340 C 
ATOM     21  C   LIG    1        9.488  -1.927  22.466 -0.27 -0.09    +0.310 C 
ATOM     22  N   LIG    1        8.508  -1.104  21.753 +0.02 +0.22    -0.620 N 
ATOM     23  C   LIG    1        8.736  -0.737  20.534 +0.05 -0.31    +0.730 C 
ATOM     24  H   LIG    1        7.688  -0.834  22.195 +0.22 -0.15    +0.420 HD
ATOM     25  N   LIG    1        7.880   0.130  19.908 -0.07 +0.26    -0.560 N 
ATOM     26  C   LIG    1        7.688   0.085  18.450 -0.39 -0.16    +0.300 C 
ATOM     27  C   LIG    1        6.183   0.036  18.161 -0.59 -0.16    +0.240 C 
ATOM     28  O   LIG    1        5.536   1.106  18.854 -0.38 +0.32    -0.360 OA
ATOM     29  C   LIG    1        5.647   1.034  20.278 -0.35 -0.19    +0.250 C 
ATOM     30  C   LIG    1        7.121   1.130  20.675 -0.28 -0.16    +0.260 C 
ENDMDL
MODEL        6
ATOM      1  C   LIG    1        7.466   3.463  24.571 -0.08 -0.14    +0.350 C 
ATOM      2  N   LIG    1        7.480   2.011  24.766 -0.01 +0.18    -0.510 N 
ATOM      3  C   LIG    1        7.253   1.167  23.691 -0.06 -0.14    +0.350 A 
ATOM      4  C   LIG    1        7.272  -0.208  23.903 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1        7.017  -0.796  22.672 -0.07 +0.17    -0.410 N 
ATOM      6  C   LIG    1        6.856   0.216  21.779 -0.05 -0.22    +0.470 A 
ATOM      7  C   LIG    1        7.521  -0.699  25.196 -0.01 -0.18    +0.600 A 
ATOM      8  N   LIG    1        7.736   0.172  26.204 -0.03 +0.15    -0.550 N 
ATOM      9  C   LIG    1        7.996  -0.335  27.554 -0.11 -0.08    +0.360 C 
ATOM     10  O   LIG    1        7.544  -1.900  25.406 -0.05 +0.14    -0.520 OA
ATOM     11  N   LIG    1        6.998   1.372  22.397 -0.01 +0.26    -0.500 NA
ATOM     12  C   LIG    1        7.720   1.498  25.987 +0.07 -0.20    +0.710 A 
ATOM     13  O   LIG    1        7.918   2.254  26.920 -0.05 +0.11    -0.520 OA
ATOM     14  N   LIG    1        6.586   0.060  20.439 -0.10 +0.24    -0.470 N 
ATOM     15  C   LIG    1        7.826   0.060  19.648 -0.45 -0.09    +0.180 C 
ATOM     16  C   LIG    1        7.484  -0.176  18.175 -0.37 -0.14    +0.240 C 
ATOM     17  O   LIG    1        6.563   0.827  17.738 -0.45 +0.27    -0.370 OA
ATOM     18  C   LIG    1        5.344   0.855  18.486 -0.51 -0.19    +0.230 C 
ATOM     19  C   LIG    1        5.664   1.102  19.963 -0.40 -0.17    +0.210 C 
ATOM     20  C   LIG    1        6.937  -2.231  22.389 -0.25 -0.11    +0.340 C 
ATOM     21  C   LIG    1        8.332  -2.764  22.053 -0.26 -0.10    +0.310 C 
ATOM     22  N   LIG    1        9.325  -2.105  22.904 -0.02 +0.17    -0.620 N 
ATOM     23  C   LIG    1       10.379  -1.573  22.375 -0.02 -0.21    +0.730 C 
ATOM     24  H   LIG    1        9.192  -2.067  23.864 +0.20 -0.11    +0.420 HD
ATOM     25  N   LIG    1       11.365  -1.064  23.178 -0.03 +0.14    -0.560 N 
ATOM     26  C   LIG    1       11.081   0.025  24.128 -0.25 -0.08    +0.300 C 
ATOM     27  C   LIG    1       11.616  -0.382  25.505 -0.34 -0.05    +0.240 C 
ATOM     28  O   LIG    1       12.985  -0.777  25.380 -0.43 +0.07    -0.360 OA
ATOM     29  C   LIG    1       13.192  -1.918  24.545 -0.54 -0.06    +0.250 C 
ATOM     30  C   LIG    1       12.736  -1.593  23.122 -0.44 -0.07    +0.260 C 
ENDMDL
MODEL        7
ATOM      1  C   LIG    1       11.352   4.246  22.835 -0.25 -0.19    +0.350 C 
ATOM      2  N   LIG    1       10.198   3.360  23.001 -0.10 +0.27    -0.510 N 
ATOM      3  C   LIG    1       10.389   1.999  23.176 -0.07 -0.14    +0.350 A 
ATOM      4  C   LIG    1        9.276   1.180  23.332 -0.17 +0.06    -0.160 A 
ATOM      5  N   LIG    1        9.760  -0.112  23.485 -0.06 +0.12    -0.410 N 
ATOM      6  C   LIG    1       11.115  -0.034  23.417 -0.10 -0.13    +0.470 A 
ATOM      7  C   LIG    1        7.993   1.755  23.309 +0.03 -0.26    +0.600 A 
ATOM      8  N   LIG    1        7.869   3.086  23.135 -0.01 +0.29    -0.550 N 
ATOM      9  C   LIG    1        6.534   3.690  23.110 -0.09 -0.23    +0.360 C 
ATOM     10  O   LIG    1        7.003   1.057  23.444 -0.02 +0.22    -0.520 OA
ATOM     11  N   LIG    1       11.472   1.221  23.235 -0.10 +0.17    -0.500 NA
ATOM     12  C   LIG    1        8.952   3.870  22.990 +0.03 -0.40    +0.710 A 
ATOM     13  O   LIG    1        8.802   5.067  22.836 -0.13 +0.31    -0.520 OA
ATOM     14  N   LIG    1       11.980  -1.098  23.524 -0.11 +0.12    -0.470 N 
ATOM     15  C   LIG    1       12.532  -1.196  24.883 -0.52 -0.04    +0.180 C 
ATOM     16  C   LIG    1       13.439  -2.426  24.971 -0.58 -0.05    +0.240 C 
ATOM     17  O   LIG    1       14.462  -2.330  23.977 -0.42 +0.14    -0.370 OA
ATOM     18  C   LIG    1       13.960  -2.235  22.642 -0.50 -0.07    +0.230 C 
ATOM     19  C   LIG    1       13.058  -1.002  22.528 -0.52 -0.06    +0.210 C 
ATOM     20  C   LIG    1        8.963  -1.326  23.680 -0.15 -0.10    +0.340 C 
ATOM     21  C   LIG    1        8.554  -1.892  22.318 -0.24 -0.10    +0.310 C 
ATOM     22  N   LIG    1        7.709  -0.921  21.619 +0.04 +0.24    -0.620 N 
ATOM     23  C   LIG    1        7.832  -0.759  20.342 +0.06 -0.32    +0.730 C 
ATOM     24  H   LIG    1        7.059  -0.399  22.114 +0.21 -0.18    +0.420 HD
ATOM     25  N   LIG    1        7.131   0.232  19.708 -0.05 +0.30    -0.560 N 
ATOM     26  C   LIG    1        7.164   0.364  18.242 -0.44 -0.18    +0.300 C 
ATOM     27  C   LIG    1        5.721   0.456  17.732 -0.58 -0.18    +0.240 C 
ATOM     28  O   LIG    1        5.034   1.486  18.447 -0.41 +0.40    -0.360 OA
ATOM     29  C   LIG    1        4.920   1.248  19.852 -0.38 -0.22    +0.250 C 
ATOM     30  C   LIG    1        6.318   1.193  20.470 -0.30 -0.19    +0.260 C 
ENDMDL
MODEL        8
ATOM      1  C   LIG    1        7.341   3.543  24.605 -0.08 -0.14    +0.350 C 
ATOM      2  N   LIG    1        7.354   2.093  24.810 -0.01 +0.18    -0.510 N 
ATOM      3  C   LIG    1        7.165   1.239  23.734 -0.06 -0.14    +0.350 A 
ATOM      4  C   LIG    1        7.181  -0.133  23.957 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1        6.970  -0.732  22.722 -0.06 +0.17    -0.410 N 
ATOM      6  C   LIG    1        6.835   0.274  21.817 -0.05 -0.22    +0.470 A 
ATOM      7  C   LIG    1        7.389  -0.614  25.261 -0.02 -0.18    +0.600 A 
ATOM      8  N   LIG    1        7.567   0.264  26.269 -0.03 +0.15    -0.550 N 
ATOM      9  C   LIG    1        7.784  -0.232  27.630 -0.12 -0.08    +0.360 C 
ATOM     10  O   LIG    1        7.408  -1.814  25.480 -0.06 +0.15    -0.520 OA
ATOM     11  N   LIG    1        6.953   1.434  22.431 -0.01 +0.26    -0.500 NA
ATOM     12  C   LIG    1        7.555   1.589  26.043 +0.03 -0.20    +0.710 A 
ATOM     13  O   LIG    1        7.719   2.352  26.975 -0.06 +0.11    -0.520 OA
ATOM     14  N   LIG    1        6.610   0.107  20.470 -0.10 +0.24    -0.470 N 
ATOM     15  C   LIG    1        7.866   0.202  19.711 -0.44 -0.09    +0.180 C 
ATOM     16  C   LIG    1        7.578  -0.049  18.229 -0.38 -0.14    +0.240 C 
ATOM     17  O   LIG    1        6.599   0.887  17.773 -0.45 +0.27    -0.370 OA
ATOM     18  C   LIG    1        5.363   0.822  18.490 -0.51 -0.19    +0.230 C 
ATOM     19  C   LIG    1        5.627   1.082  19.976 -0.40 -0.17    +0.210 C 
ATOM     20  C   LIG    1        6.903  -2.169  22.448 -0.25 -0.11    +0.340 C 
ATOM     21  C   LIG    1        8.303  -2.691  22.117 -0.27 -0.10    +0.310 C 
ATOM     22  N   LIG    1        9.226  -2.334  23.197 -0.02 +0.16    -0.620 N 
ATOM     23  C   LIG    1       10.440  -1.983  22.921 -0.01 -0.19    +0.730 C 
ATOM     24  H   LIG    1        8.926  -2.360  24.119 +0.19 -0.10    +0.420 HD
ATOM     25  N   LIG    1       11.336  -1.767  23.934 -0.05 +0.13    -0.560 N 
ATOM     26  C   LIG    1       12.511  -2.638  24.104 -0.36 -0.05    +0.300 C 
ATOM     27  C   LIG    1       13.757  -1.753  24.221 -0.56 -0.06    +0.240 C 
ATOM     28  O   LIG    1       13.542  -0.770  25.237 -0.44 +0.08    -0.360 OA
ATOM     29  C   LIG    1       12.466   0.131  24.963 -0.40 -0.06    +0.250 C 
ATOM     30  C   LIG    1       11.157  -0.655  24.880 -0.28 -0.06    +0.260 C 
ENDMDL
MODEL        9
ATOM      1  C   LIG    1        7.689   3.094  25.197 -0.04 -0.12    +0.350 C 
ATOM      2  N   LIG    1        7.448   1.656  25.065 -0.02 +0.17    -0.510 N 
ATOM      3  C   LIG    1        7.233   1.102  23.813 -0.06 -0.14    +0.350 A 
ATOM      4  C   LIG    1        7.006  -0.267  23.715 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1        6.825  -0.537  22.366 -0.07 +0.18    -0.410 N 
ATOM      6  C   LIG    1        6.943   0.648  21.709 -0.05 -0.23    +0.470 A 
ATOM      7  C   LIG    1        7.004  -1.047  24.884 -0.02 -0.20    +0.600 A 
ATOM      8  N   LIG    1        7.220  -0.452  26.076 -0.02 +0.15    -0.550 N 
ATOM      9  C   LIG    1        7.218  -1.261  27.297 -0.08 -0.09    +0.360 C 
ATOM     10  O   LIG    1        6.808  -2.248  24.823 -0.09 +0.15    -0.520 OA
ATOM     11  N   LIG    1        7.185   1.608  22.579 -0.01 +0.25    -0.500 NA
ATOM     12  C   LIG    1        7.443   0.871  26.159 +0.01 -0.19    +0.710 A 
ATOM     13  O   LIG    1        7.634   1.373  27.250 -0.05 +0.11    -0.520 OA
ATOM     14  N   LIG    1        6.830   0.818  20.349 -0.09 +0.28    -0.470 N 
ATOM     15  C   LIG    1        5.450   0.580  19.900 -0.44 -0.12    +0.180 C 
ATOM     16  C   LIG    1        5.357   0.840  18.395 -0.50 -0.20    +0.240 C 
ATOM     17  O   LIG    1        6.298   0.006  17.714 -0.46 +0.25    -0.370 OA
ATOM     18  C   LIG    1        7.653   0.212  18.125 -0.36 -0.13    +0.230 C 
ATOM     19  C   LIG    1        7.770  -0.053  19.629 -0.43 -0.10    +0.210 C 
ATOM     20  C   LIG    1        6.556  -1.846  21.765 -0.25 -0.12    +0.340 C 
ATOM     21  C   LIG    1        7.763  -2.762  21.977 -0.27 -0.10    +0.310 C 
ATOM     22  N   LIG    1        8.804  -2.036  22.708 -0.01 +0.18    -0.620 N 
ATOM     23  C   LIG    1        9.838  -1.580  22.078 -0.01 -0.23    +0.730 C 
ATOM     24  H   LIG    1        8.720  -1.898  23.664 +0.20 -0.11    +0.420 HD
ATOM     25  N   LIG    1       10.868  -1.009  22.778 -0.04 +0.15    -0.560 N 
ATOM     26  C   LIG    1       10.611   0.013  23.805 -0.21 -0.09    +0.300 C 
ATOM     27  C   LIG    1       11.351  -0.391  25.086 -0.33 -0.06    +0.240 C 
ATOM     28  O   LIG    1       12.722  -0.648  24.775 -0.35 +0.09    -0.360 OA
ATOM     29  C   LIG    1       12.924  -1.734  23.868 -0.48 -0.06    +0.250 C 
ATOM     30  C   LIG    1       12.264  -1.402  22.528 -0.41 -0.07    +0.260 C 
ENDMDL
MODEL        10
ATOM      1  C   LIG    1        8.730   4.000  22.625 -0.15 -0.22    +0.350 C 
ATOM      2  N   LIG    1        7.970   2.901  23.226 -0.03 +0.25    -0.510 N 
ATOM      3  C   LIG    1        8.583   1.678  23.449 -0.07 -0.14    +0.350 A 
ATOM      4  C   LIG    1        7.839   0.651  24.021 -0.13 +0.06    -0.160 A 
ATOM      5  N   LIG    1        8.693  -0.439  24.124 -0.05 +0.12    -0.410 N 
ATOM      6  C   LIG    1        9.894  -0.045  23.623 -0.04 -0.14    +0.470 A 
ATOM      7  C   LIG    1        6.494   0.883  24.356 +0.00 -0.24    +0.600 A 
ATOM      8  N   LIG    1        5.952   2.094  24.115 -0.00 +0.24    -0.550 N 
ATOM      9  C   LIG    1        4.550   2.340  24.463 -0.07 -0.15    +0.360 C 
ATOM     10  O   LIG    1        5.823  -0.002  24.859 -0.02 +0.24    -0.520 OA
ATOM     11  N   LIG    1        9.813   1.210  23.228 -0.03 +0.18    -0.500 NA
ATOM     12  C   LIG    1        6.681   3.081  23.567 +0.06 -0.36    +0.710 A 
ATOM     13  O   LIG    1        6.159   4.162  23.364 -0.01 +0.32    -0.520 OA
ATOM     14  N   LIG    1       11.019  -0.832  23.542 -0.07 +0.12    -0.470 N 
ATOM     15  C   LIG    1       11.927  -0.574  24.670 -0.45 -0.04    +0.180 C 
ATOM     16  C   LIG    1       13.132  -1.512  24.572 -0.53 -0.05    +0.240 C 
ATOM     17  O   LIG    1       13.774  -1.325  23.308 -0.38 +0.10    -0.370 OA
ATOM     18  C   LIG    1       12.919  -1.569  22.187 -0.50 -0.06    +0.230 C 
ATOM     19  C   LIG    1       11.710  -0.631  22.260 -0.36 -0.05    +0.210 C 
ATOM     20  C   LIG    1        8.364  -1.759  24.668 -0.09 -0.09    +0.340 C 
ATOM     21  C   LIG    1        7.803  -2.644  23.552 -0.24 -0.08    +0.310 C 
ATOM     22  N   LIG    1        6.872  -1.866  22.732 -0.02 +0.22    -0.620 N 
ATOM     23  C   LIG    1        7.081  -1.736  21.462 +0.00 -0.26    +0.730 C 
ATOM     24  H   LIG    1        6.098  -1.448  23.141 -0.38 -0.23    +0.420 HD
ATOM     25  N   LIG    1        6.281  -0.910  20.718 -0.08 +0.23    -0.560 N 
ATOM     26  C   LIG    1        5.740   0.335  21.286 -0.23 -0.16    +0.300 C 
ATOM     27  C   LIG    1        6.043   1.482  20.316 -0.31 -0.21    +0.240 C 
ATOM     28  O   LIG    1        5.582   1.127  19.010 -0.36 +0.31    -0.360 OA
ATOM     29  C   LIG    1        6.230  -0.017  18.450 -0.55 -0.16    +0.250 C 
ATOM     30  C   LIG    1        5.941  -1.239  19.325 -0.37 -0.13    +0.260 C 
ENDMDL


'''


@bp.route('/lastTrajectory.pdbqt')
def sendTraj():
	return traj





add_blueprint(bp)


